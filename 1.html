<!DOCTYPE HTML>

<html>
<head>
    <title>如何賺錢</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <link type="image/png" sizes="96x96" rel="icon" href="assets/icons8-hard-working-96.png">
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body class="is-preload">

    <!-- Wrapper -->
    <div id="wrapper">

        <!-- Main -->
        <div id="main">
            <div class="inner">

                <!-- Content -->
                <section>
                    <header class="main">
                        <h1>如何賺錢</h1>
                    </header>

                    <span class="image main"><img src="images/pic01.jpg" alt="" /></span>
                    <p>喬治是一名程式設計師，他對於電腦和程式語言有著極深厚的熱情。他在大學時期選擇了資訊工程作為他的專業，並且在畢業後也順利地找到了一份程式設計師的工作。</p>

                    <p>喬治在工作中表現得非常優秀，他的程式技巧和創造力都讓同事們十分佩服。他的工作表現也讓他的老闆非常滿意，給了他相應的晉升和薪水加薪。但是，喬治在經過了一段時間的工作後，開始感到了無聊和疲憊。</p>

                    <p>他發現自己在這個行業裡已經做了幾年了，但是他並沒有感到任何的成就感。每天重複的編寫程式碼，沒有任何新的挑戰和樂趣，讓他開始反思自己的人生。他開始想著，這樣繼續下去，他的人生會變得毫無意義。</p>

                    <p>在這個關鍵時刻，喬治決定放棄他的程式設計師工作，轉而到農場裡工作。這個決定讓他的家人和朋友們都感到十分驚訝，甚至有些人認為他瘋了。</p>

                    <p>但是，喬治並不在意他人的看法，他相信這樣的決定是對的。他開始研究農業知識，學習如何種植作物和飼養動物。他努力地工作，每天都在農場上忙碌著，但是他感到自己的生活變得更加有意義和充實。</p>

                    <p>他享受著在農場上工作的感覺，每天都可以看到自己的汗水化為果實，這種成就感讓他十分滿足。此外，農場上也有很多挑戰和困難，需要他去解決。他必須面對天氣變化、動物疾病和其他問題，這些都需要他付出更多的心力和努力。</p>

                    <p>當喬治轉型為農夫之後，他發現自己對生活有了新的看法。他開始珍惜每一個細節，</p>

                    <p>從種植到收成的每一個環節，他都親身參與其中，並且感受到了生命的價值和意義。他也開始更加關注環境保護和可持續發展，他知道只有對大自然負責，才能讓人類長久地繁衍和生存下去。</p>

                    <p>喬治的決定雖然讓人感到意外，但是他的家人和朋友們也漸漸地理解和支持他。他們看到了喬治在農場上的辛勤付出和成就，也開始尊重他的決定。此外，喬治也與許多有共同理念的農夫建立起了良好的關係，彼此互相學習和交流，讓他更加充實和快樂。</p>

                    <p>雖然喬治的生活發生了巨大的變化，但是他從中獲得了更多的收穫和滿足感。他知道自己在農場上的工作或許不如程式設計師那麼高薪和炫目，但是他卻感到自己更加快樂和自由。他從中學會了珍惜生命，珍惜時間，並且明白了生命的真諦在於享受當下，活在當下。</p>

                    <p>綜合來看，喬治的決定或許有些出乎意料，但是卻讓他獲得了更多的生命價值和意義。無論是程式設計師還是農夫，每一個人都有自己的選擇和追求。重要的是，我們要找到屬於自己的路，勇敢地走下去，並且在這個過程中學會珍惜和享受生命的旅程。</p>

                    <header class="main">
                        <h3>👋 留言板</h3>
                    </header>

                    <!-- 使用者資訊 -->
                    <section id="user-info" style="display: none;">
                        <p>歡迎，<span id="currentUsername"></span>！<button id="logoutButton">登出</button></p>
                    </section>

                    <!-- 留言板 -->
                    <section id="comments-section">
                        <div id="comments"></div>
                        <form id="commentForm">
                            <textarea name="message" id="message" placeholder="請在這裡輸入內容..." rows="4" required></textarea>
                            <br>
                            <button type="submit">提交留言</button>
                        </form>
                    </section>

                    <!-- 登入表單 -->
                    <section id="login-section">
                        <header class="main">
                            <h2>登入</h2>
                        </header>
                        <form id="loginForm">
                            <label for="loginUsername">用戶名</label>
                            <input type="text" id="loginUsername" name="username" required>
                            <label for="loginPassword">密碼</label>
                            <input type="password" id="loginPassword" name="password" required>
                            <button type="submit">登入</button>
                        </form>
                        <p>還沒有帳號？<a href="#" id="showRegister">註冊</a></p>
                    </section>

                    <!-- 註冊表單 -->
                    <section id="register-section" style="display: none;">
                        <header class="main">
                            <h2>註冊</h2>
                        </header>
                        <form id="registerForm">
                            <label for="registerUsername">用戶名</label>
                            <input type="text" id="registerUsername" name="username" required>
                            <label for="registerEmail">電子郵件</label>
                            <input type="email" id="registerEmail" name="email" required>
                            <label for="registerPassword">密碼</label>
                            <input type="password" id="registerPassword" name="password" required>
                            <button type="submit">註冊</button>
                        </form>
                        <p>已經有帳號了？<a href="#" id="showLogin">登入</a></p>
                    </section>
                </section>
            </div>
        </div>

        <!-- 浮動按鈕 -->
        <div id="floating-button" onclick="scrollToTop()">
            <img src="assets/arrow-up.png" alt="Arrow" width="50" height="50">
        </div>
        <script>
            function scrollToTop() {
                $('html, body').animate({
                    scrollTop: 0
                }, 'slow');
            }
        </script>

        <!-- Sidebar -->
        <div id="sidebar">
            <div class="inner">

                <!-- Search -->
                <section>
                    <form action="https://cse.google.com/cse?cx=a6281ea9750794650" id="a6281ea9750794650">
                        <input type="hidden" name="cx" value="a6281ea9750794650">
                        <input type="hidden" name="ie" value="UTF-8">

                        <input type="text" name="q" placeholder="站內搜尋">
                        <button type="submit">搜尋</button>
                    </form>
                </section>

                <!-- Menu -->
                <nav id="menu">
                    <header class="major">
                        <h2>Menu</h2>
                    </header>
                    <ul>
                        <li><a href="index.htm">🏠 首頁</a></li>
                        <li><a href="photo_post/about.html">📂 關於我</a></li>
                        <li><a href="photo_post/photo_index.html">📸 相簿</a></li>
                        <li><a href="feedback.html">💬 意見回饋</a></li>
                    </ul>
                </nav>

                <section>
                    <header class="major">
                        <h2>📌 釘選文章</h2>
                    </header>
                    <div class="mini-posts">

                        <article>
                            <a href="1.html" class="image"><img src="images/pic01.jpg" alt="" /><br><br>
                                <h3>如何賺錢</h3></a>
                        </article>
                        <article>
                            <a href="photo_post/about.html" class="image"><img src="photo_post/assets/img/about/hi.PNG" alt="" /><br><br>
                                <h3>自我介紹</h3></a>
                        </article>
                    </div>

                </section>
                <!-- Section -->
                <section>
                    <header class="major">
                        <h2>☎️ 聯絡我</h2>
                    </header>
                    <p>This is fake</p>
                    <ul class="contact">
                        <li class="icon solid fa-envelope"><a href="mailto:information@untitled.tld">information@untitled.tld</a></li>
                        <li class="icon solid fa-phone">(000) 000-0000</li>
                        <li class="icon solid fa-map">Somewhere Road<br /></li>
                    </ul>
                </section>

            </div>
        </div>

    </div>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/validateForm.js"></script>
    <script src="assets/js/main.js"></script>
   

    <!-- Inline JavaScript for Authentication and Comments -->
    <script>
        $(document).ready(function () {
            // 顯示註冊表單
            $('#showRegister').click(function (e) {
                e.preventDefault();
                $('#login-section').hide();
                $('#register-section').show();
            });

            // 顯示登入表單
            $('#showLogin').click(function (e) {
                e.preventDefault();
                $('#register-section').hide();
                $('#login-section').show();
            });

            // 登入表單提交
            $('#loginForm').submit(function (e) {
                e.preventDefault();
                const username = $('#loginUsername').val();
                const password = $('#loginPassword').val();

                $.ajax({
                    url: 'https://duvtzrkm03.execute-api.us-east-1.amazonaws.com/login',
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({ username, password }),
                    success: function (response) {
                        // 儲存 token
                        localStorage.setItem('token', response.token);
                        alert('登入成功');

                        // 隱藏登入表單，顯示留言板和使用者資訊
                        $('#login-section').hide();
                        $('#register-section').hide();
                        $('#user-info').show();

                        // 解碼 JWT 以獲取用戶名
                        const payload = JSON.parse(atob(response.token.split('.')[1]));
                        $('#currentUsername').text(payload.username);

                        $('#comments-section').show();
                        getComments();
                    },
                    error: function (xhr) {
                        alert(xhr.responseJSON.message || '登入失敗');
                    }
                });
            });

            // 註冊表單提交
            $('#registerForm').submit(function (e) {
                e.preventDefault();
                const username = $('#registerUsername').val();
                const email = $('#registerEmail').val();
                const password = $('#registerPassword').val();

                $.ajax({
                    url: 'https://duvtzrkm03.execute-api.us-east-1.amazonaws.com/register',
                    method: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({ username, email, password }),
                    success: function (response) {
                        alert('註冊成功，請登入');
                        $('#register-section').hide();
                        $('#login-section').show();
                    },
                    error: function (xhr) {
                        alert(xhr.responseJSON.message || '註冊失敗');
                    }
                });
            });

            // 登出功能
            $('#logoutButton').click(function () {
                localStorage.removeItem('token');
                alert('已登出');
                $('#user-info').hide();
                $('#comments-section').hide();
                $('#login-section').show();
            });

            // 提交留言表單
            $('#commentForm').submit(function (e) {
                e.preventDefault();
                const content = $('#message').val();
                const token = localStorage.getItem('token');

                if (!token) {
                    alert('請先登入');
                    return;
                }

                $.ajax({
                    url: 'https://duvtzrkm03.execute-api.us-east-1.amazonaws.com/comments',
                    method: 'POST',
                    contentType: 'application/json',
                    headers: { 'Authorization': token },
                    data: JSON.stringify({ content }),
                    success: function (response) {
                        alert('留言提交成功');
                        $('#message').val('');
                        getComments();
                    },
                    error: function (xhr) {
                        alert(xhr.responseJSON.message || '留言提交失敗');
                    }
                });
            });

            // 獲取並顯示留言
            function getComments() {
                $.ajax({
                    url: 'https://duvtzrkm03.execute-api.us-east-1.amazonaws.com/comments',
                    method: 'GET',
                    success: function (response) {
                        const comments = response.comments;
                        $('#comments').empty();
                        comments.forEach(comment => {
                            const commentElement = `
                                <div class="comment" data-id="${comment.comment_id}" data-user="${comment.user_id}">
                                    <div class="avatar">
                                        <img src="assets/images/user.png" alt="User Avatar">
                                    </div>
                                    <div class="comment-content">
                                        <h3 class="username">${comment.user_id}</h3>
                                        <p class="message">${comment.content}</p>
                                        ${comment.user_id === getCurrentUserId() ? `
                                            <button class="edit-comment">編輯</button>
                                            <button class="delete-comment">刪除</button>
                                        ` : ''}
                                    </div>
                                </div>
                            `;
                            $('#comments').append(commentElement);
                        });
                    },
                    error: function (xhr) {
                        alert(xhr.responseJSON.message || '無法獲取留言');
                    }
                });
            }

            // 編輯留言
            $('#comments').on('click', '.edit-comment', function () {
                const commentDiv = $(this).closest('.comment');
                const commentId = commentDiv.data('id');
                const currentContent = commentDiv.find('.message').text();
                const newContent = prompt('請輸入新的留言內容：', currentContent);

                if (newContent === null) return; // 使用者取消

                const token = localStorage.getItem('token');

                $.ajax({
                    url: `https://duvtzrkm03.execute-api.us-east-1.amazonaws.com/comments/${commentId}`,
                    method: 'PUT',
                    contentType: 'application/json',
                    headers: { 'Authorization': token },
                    data: JSON.stringify({ content: newContent }),
                    success: function (response) {
                        alert('留言已更新');
                        getComments();
                    },
                    error: function (xhr) {
                        alert(xhr.responseJSON.message || '留言更新失敗');
                    }
                });
            });

            // 刪除留言
            $('#comments').on('click', '.delete-comment', function () {
                const commentDiv = $(this).closest('.comment');
                const commentId = commentDiv.data('id');

                if (!confirm('確定要刪除這條留言嗎？')) return;

                const token = localStorage.getItem('token');

                $.ajax({
                    url: `https://duvtzrkm03.execute-api.us-east-1.amazonaws.com/comments/${commentId}`,
                    method: 'DELETE',
                    headers: { 'Authorization': token },
                    success: function (response) {
                        alert('留言已刪除');
                        getComments();
                    },
                    error: function (xhr) {
                        alert(xhr.responseJSON.message || '留言刪除失敗');
                    }
                });
            });

            // 獲取當前使用者 ID（從 token 解碼）
            function getCurrentUserId() {
                const token = localStorage.getItem('token');
                if (!token) return null;
                try {
                    const payload = JSON.parse(atob(token.split('.')[1]));
                    return payload.user_id;
                } catch (e) {
                    return null;
                }
            }

            // 當頁面載入時檢查是否已登入
            if (localStorage.getItem('token')) {
                try {
                    const token = localStorage.getItem('token');
                    const payload = JSON.parse(atob(token.split('.')[1]));
                    const username = payload.username;
                    $('#currentUsername').text(username);
                    $('#user-info').show();
                    $('#comments-section').show();
                    $('#login-section').hide();
                    $('#register-section').hide();
                    getComments();
                } catch (e) {
                    // 如果 token 無效，清除並顯示登入表單
                    localStorage.removeItem('token');
                    $('#user-info').hide();
                    $('#comments-section').hide();
                    $('#login-section').show();
                }
            } else {
                $('#user-info').hide();
                $('#comments-section').hide();
                $('#login-section').show();
            }
        });
    </script>

</body>

</html>